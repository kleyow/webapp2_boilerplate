-extends "private_base.haml"

-set title = "Send money to a friend"

-block content
  #transaction.container

    .row: .span10
      %h2.center Send money to a friend

    .row
      .span10
        %form.transfer.center(action="#{uri_for('transaction.transfer')}", \
                       method="POST")
          .control-group
            %label.control-label(for="recipient") Recipient's email address:
            .controls
              %input#recipient(type="email", name="recipient", \
                               value="#{request.POST.get('recipient', '')}")

            %label.control-label(for="amount") Amount
            .controls
              %input#amount.input-small(type="number", name="amount", \
                                        step="0.01", autocomplete="off", \
                                        placeholder="$0.00", \
                                        value="#{request.POST.get('amount', '')}")

            %label.control-label(for="currency") Currency
            .controls
              %select#currency(name="currency")
                -for currency in constants.CURRENCIES
                  -if currency == request.POST.get('currency', '')
                    %option(value="#{currency}", selected="selected")
                      #{currency.upper()}
                  -else
                    %option(value="#{currency}")
                      #{currency.upper()}

            %label.control-label(for="pin") PIN:
            .controls
              %input#pin.inout-small(type="password", name="pin", maxlength="4")

          -if not current_profile.pin:
            .alert.alert-error.center
              Please click
              %a(href="#{uri_for('profile.update')}") here
              and choose a 4-digit PIN before continuing.

          .form-actions
            %button(type="submit")
              %i.icon-check
              Send money

      .span2
        -include "components/basic_info_section.haml"
